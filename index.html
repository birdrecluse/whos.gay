<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bitcoin Block Height Countdown</title>
</head>
<body>
  <h1>Bitcoin Block Height Countdown</h1>

  <script>
    async function getBlockHeight() {
      const response = await fetch('https://blockchain.info/q/getblockcount');
      const data = await response.json();
      return data;
    }

    function getTargetHeight() {
      const targetHeightInput = document.getElementById('targetHeight');
      const targetHeight = parseInt(targetHeightInput.value);
      return targetHeight;
    }

    function calculateCountdown(currentHeight, targetHeight) {
      return (targetHeight - currentHeight) * 10 * 60 * 1000;
    }

    function formatDate(timestamp) {
      const date = new Date(timestamp);
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const day = String(date.getDate()).padStart(2, '0');
      const hours = String(date.getHours()).padStart(2, '0');
      const minutes = String(date.getMinutes()).padStart(2, '0');

      return `${year}-${month}-${day}, ${hours}:${minutes}`;
    }

    async function displayCurrentHeight(){
      const currentHeight = await getBlockHeight();
      document.getElementById('currentHeight').textContent = currentHeight;
    }

    async function main() {
      const currentHeight = await getBlockHeight();
      document.getElementById('currentHeight').textContent = currentHeight;

      const targetHeight = getTargetHeight();
      if (isNaN(targetHeight)) {
        alert('Please enter a valid target block height.');
        return;
      }

      const remainingTime = calculateCountdown(currentHeight, targetHeight);
      const futureDate = formatDate(Date.now() + remainingTime);

      document.getElementById('countdown').textContent = `Time remaining: ${Math.floor(remainingTime / (1000 * 60 * 60))}h ${Math.floor((remainingTime % (1000 * 60 * 60)) / (1000 * 60))}m`;
      document.getElementById('futureDate').textContent = `Estimated date and time: ${futureDate}`;
    }
    displayCurrentHeight();
  </script>

  <p>Current Bitcoin Block Height: <span id="currentHeight"></span></p>
  <p>Enter Target Block Height: <input type="number" id="targetHeight"></p>
  <button onclick="main()">Calculate</button>
  <p id="countdown"></p>
  <p id="futureDate"></p>
</body>
</html>
